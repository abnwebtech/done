(function(){var u={},f=null,e=null,r=null,i=null,t={},o={color:"#ff0084",background:"#bbb",shadow:"#fff",fallback:!1},a=window.devicePixelRatio>1,n=function(){var n=navigator.userAgent.toLowerCase();return function(t){return n.indexOf(t)!==-1}}(),l={ie:n("msie"),chrome:n("chrome"),webkit:n("chrome")||n("safari"),safari:n("safari")&&!n("chrome"),mozilla:n("mozilla")&&!n("chrome")&&!n("safari")},p=function(){for(var t=document.getElementsByTagName("link"),n=0,i=t.length;n<i;n++)if(t[n].getAttribute("rel")==="icon"||t[n].getAttribute("rel")==="shortcut icon")return t[n];return!1},y=function(){for(var t=document.getElementsByTagName("link"),r=document.getElementsByTagName("head")[0],n=0,i=t.length;n<i;n++)t[n]&&(t[n].getAttribute("rel")==="icon"||t[n].getAttribute("rel")==="shortcut icon")&&r.removeChild(t[n])},s=function(n){y();var t=document.createElement("link");t.type="image/x-icon",t.rel="icon",t.href=n,document.getElementsByTagName("head")[0].appendChild(t)},h=function(){return i||(i=document.createElement("canvas"),a?(i.width=32,i.height=32):(i.width=16,i.height=16)),i},v=function(n){var i=h(),r=i.getContext("2d"),n=n||0,e=f,u=new Image;u.onload=function(){r&&(r.clearRect(0,0,i.width,i.height),r.beginPath(),r.moveTo(i.width/2,i.height/2),r.arc(i.width/2,i.height/2,Math.min(i.width/2,i.height/2),0,Math.PI*2,!1),r.fillStyle=t.shadow,r.fill(),r.beginPath(),r.moveTo(i.width/2,i.height/2),r.arc(i.width/2,i.height/2,Math.min(i.width/2,i.height/2)-2,0,Math.PI*2,!1),r.fillStyle=t.background,r.fill(),n>0&&(r.beginPath(),r.moveTo(i.width/2,i.height/2),r.arc(i.width/2,i.height/2,Math.min(i.width/2,i.height/2)-2,-.5*Math.PI,(-.5+2*n/100)*Math.PI,!1),r.lineTo(i.width/2,i.height/2),r.fillStyle=t.color,r.fill()),s(i.toDataURL()))},e.match(/^data/)||(u.crossOrigin="anonymous"),u.src=e},c=function(n){document.title=n>0?"("+n+"%) "+r:r};u.setOptions=function(n){t={};for(var i in o)t[i]=n.hasOwnProperty(i)?n[i]:o[i];return this},u.setProgress=function(n){if(r||(r=document.title),!e||!f){var i=p();e=f=i?i.getAttribute("href"):"/favicon.ico"}return!isNaN(parseFloat(n))&&isFinite(n)?!h().getContext||l.ie||l.safari||t.fallback===!0?c(n):(t.fallback==="force"&&c(n),v(n)):!1},u.reset=function(){r&&(document.title=r),e&&(f=e,s(f))},u.setOptions(o),window.Piecon=u})();